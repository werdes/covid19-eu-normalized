function getChartOptions(e,t){return{chart:{zoomType:"xy"},title:{text:""},yAxis:{title:{text:"confirmed cases"}},xAxis:{labels:{align:"left",formatter:function(){return""}}},legend:{layout:"vertical",align:"right",verticalAlign:"middle"},tooltip:{headerFormat:"",useHtml:!0},plotOptions:{series:{label:{connectorAllowed:!1},pointStart:e}},series:t,responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}}}$(function(){$.get({url:"https://raw.githubusercontent.com/BlankerL/DXY-COVID-19-Data/master/json/DXYArea-TimeSeries.json",cache:!0,dataType:"json",complete:function(e){var t={},n=new Array,a=null;e.responseJSON.forEach(function(e,n){if(e.countryEnglishName&&e.provinceEnglishName==e.countryEnglishName&&"Europe"==e.continentEnglishName){t[e.countryEnglishName]||(t[e.countryEnglishName]={country:e.countryEnglishName,reachedThresholdAt:null,reachedThreshold:!1,dayDiffToLowest:0,snapshots:new Array,fullCaseCount:0,byDay:{}});var o=t[e.countryEnglishName];if(o.snapshots.push(e),e.confirmedCount>=100){if(o.reachedThreshold=!0,null==o.reachedThresholdAt||o.reachedThresholdAt>new Date(e.updateTime)){var r=new Date(e.updateTime);o.reachedThresholdAt=r,(null==a||a>r)&&(a=r)}o.fullCaseCount<e.confirmedCount&&(o.fullCaseCount=e.confirmedCount)}}}),Object.keys(t).forEach(function(e){var o=t[e];if(o.dayDiffToLowest=Math.round((o.reachedThresholdAt-a)/864e5),o.reachedThreshold){o.snapshots.sort(function(e,t){return e.updateTime-t.updateTime}),o.snapshots.forEach(function(t){var n=new Date(t.updateTime),a=n.getFullYear()+"/"+("0"+(n.getMonth()+1)).slice(-2)+"/"+("0"+n.getDate()).slice(-2);o.byDay[a]||(o.byDay[a]=t.confirmedCount),o.byDay[a]<t.confirmedCount&&(console.log("overwritten "+e+"/"+a+":"+o.byDay[a]+"->"+t.confirmedCount),o.byDay[a]=t.confirmedCount)});var r=new Array;Object.keys(o.byDay).forEach(function(e){var t=1+Math.round((new Date(e)-o.reachedThresholdAt)/864e5),n=new Date(e);n.setDate(n.getDate()-o.dayDiffToLowest),r.push({x:n,real:new Date(e),daysSinceStart:t,region:o,y:o.byDay[e]})}),n.push({name:e,data:r}),console.log(e+" done")}o.snapshots=null}),$("#loading-indicator").addClass("d-none"),Highcharts.chart("chart",getChartOptions(a,n))}})}),Highcharts.Point.prototype.tooltipFormatter=function(e){var t=this,n=t.real.getFullYear()+"/"+("0"+(t.real.getMonth()+1)).slice(-2)+"/"+("0"+t.real.getDate()).slice(-2);return"<b>"+t.region.country+" </b> | Day "+t.daysSinceStart+"<br/>"+t.y+" confirmed cases<br />Offset: "+t.region.dayDiffToLowest+" days<br/>"+n};